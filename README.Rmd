---
output: github_document
bibliography: references.bib
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# sfcr

<!-- badges: start -->
[![Travis build status](https://travis-ci.com/joaomacalos/sfcr.svg?branch=master)](https://travis-ci.com/joaomacalos/sfcr)
<!-- badges: end -->

The goal of `sfcr` is to provide an intuitive and `tidy` way to estimate stock-flow consistent (SFC) models with R. 

## Installation

You can install the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("joaomacalos/sfcr")
```
## Example

This is a basic example which shows you how to simulate the steady state of the "SIM" model from @godley2007monetary [ch. 3] and simulate a scenario where the government increase its expenditures.

A more complete description of the `sfcr_sim()` and `sfcr_scenario()` variables can be found at the `vignette("sfcr")`.

The first step is to simulate the steady state of the model with the `sfcr_sim()` function:

```{r example}
library(sfcr)

eqs <- list(
  TX_s ~ TX_d,
  YD ~ W * N_s - TX_s,
  C_d ~ alpha1 * YD + alpha2 * H_h[-1],
  H_h ~ YD - C_d + H_h[-1],
  N_s ~ N_d,
  N_d ~ Y / W,
  C_s ~ C_d,
  G_s ~ G_d,
  Y ~ C_s + G_s,
  TX_d ~ theta * W * N_s,
  H_s ~ G_d - TX_d + H_s[-1]
)

exg <- list(
  G_d ~ 20, 
  W ~ 1
  )

params <- list(
  alpha1 ~ 0.6,
  alpha2 ~ 0.4,
  theta ~ 0.2
  )

sim <- sfcr_sim(
  equations = eqs, 
  periods = 60, 
  exogenous = exg, 
  parameters = params
  )

sim
```

With the steady state values at hand, we can use the `sfcr_scenario()` function to see what happens if we increase government expenditures `G_d` from 20 to 30:

```{r}
shock <- sfcr_shock(
  variables = list(
    G_d ~ 30
  ),
  start = 5,
  end = 60
)

sim2 <- sfcr_scenario(
  sfcr_sim = sim,
  scenario = list(shock),
  periods = 60
  )

sim2
```

With `sfcr`, the models are written entirely with R using the standard R syntax. Furthermore, their output is a `tibble` that is easily manipulated with the `tidyverse` tools and plotted with `ggplot2`.

### References
